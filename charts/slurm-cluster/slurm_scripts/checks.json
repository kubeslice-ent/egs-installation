[
  {
    "name": "boot_disk_full",
    "command": "./boot_disk_full.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["prolog", "hc_program"],
    "node_states": ["any"],
    "on_fail": "drain",
    "on_ok": "undrain",
    "reason_base": "[user_problem] $name",
    "reason_append_details": true,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "job_tmpfs_recreate",
    "command": "./job_tmpfs_recreate.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["none"],
    "node_states": ["any"],
    "on_fail": "none",
    "on_ok": "none",
    "reason_base": "",
    "reason_append_details": false,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "job_tmpfs_delete",
    "command": "./job_tmpfs_delete.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["none"],
    "node_states": ["any"],
    "on_fail": "none",
    "on_ok": "none",
    "reason_base": "",
    "reason_append_details": false,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "job_tmpfs_delete_leftover",
    "command": "./job_tmpfs_delete_leftover.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["none"],
    "node_states": ["any"],
    "on_fail": "none",
    "on_ok": "none",
    "reason_base": "",
    "reason_append_details": false,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "alloc_mem_used",
    "command": "./alloc_mem_used.drain.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["prolog"],
    "node_states": ["any"],
    "on_fail": "drain",
    "on_ok": "none",
    "reason_base": "[user_problem] $name",
    "reason_append_details": true,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": ["CHECKS_JOB_ALLOC_MEM_BYTES"]
  },
  {
    "name": "alloc_mem_used",
    "command": "./alloc_mem_used.undrain.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["hc_program"],
    "node_states": ["drain"],
    "on_fail": "none",
    "on_ok": "undrain",
    "reason_base": "[user_problem] $name",
    "reason_append_details": true,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": ["CHECKS_NODE_REAL_MEM_BYTES"]
  },
  {
    "name": "alloc_gpus_busy",
    "command": "./alloc_gpus_busy.drain.sh",
    "platforms": ["8xGPU", "1xGPU"],
    "skip_for_cpu_jobs": true,
    "contexts": ["prolog"],
    "node_states": ["any"],
    "on_fail": "drain",
    "on_ok": "none",
    "reason_base": "[user_problem] $name",
    "reason_append_details": true,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "alloc_gpus_busy",
    "command": "./alloc_gpus_busy.undrain.sh",
    "platforms": ["8xGPU", "1xGPU"],
    "skip_for_cpu_jobs": true,
    "contexts": ["prolog"],
    "node_states": ["drain"],
    "on_fail": "drain",
    "on_ok": "undrain",
    "reason_base": "[user_problem] $name",
    "reason_append_details": true,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "cleanup_enroot",
    "command": "./cleanup_enroot.sh",
    "platforms": ["any"],
    "skip_for_cpu_jobs": false,
    "contexts": ["prolog"],
    "node_states": ["any"],
    "on_fail": "none",
    "on_ok": "none",
    "reason_base": "",
    "reason_append_details": false,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "map_job_dcgm",
    "command": "./map_job_dcgm.sh",
    "platforms": ["8xGPU", "1xGPU"],
    "skip_for_cpu_jobs": true,
    "contexts": ["prolog"],
    "node_states": ["any"],
    "on_fail": "none",
    "on_ok": "none",
    "reason_base": "",
    "reason_append_details": false,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "unmap_job_dcgm",
    "command": "./unmap_job_dcgm.sh",
    "platforms": ["8xGPU", "1xGPU"],
    "skip_for_cpu_jobs": true,
    "contexts": ["epilog"],
    "node_states": ["any"],
    "on_fail": "none",
    "on_ok": "none",
    "reason_base": "",
    "reason_append_details": false,
    "run_in_jail": false,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "gpu_health_check",
    "command": "/usr/bin/python3 gpu_health_check.py",
    "platforms": ["8xH100", "8xH200", "8xB200"],
    "skip_for_cpu_jobs": true,
    "contexts": ["any"],
    "node_states": ["any"],
    "on_fail": "drain",
    "on_ok": "none",
    "reason_base": "[node_problem] $name",
    "reason_append_details": true,
    "run_in_jail": true,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": ["CHECKS_PLATFORM_TAG"]
  },
  {
    "name": "hc_host_service",
    "command": "./hc_host_service.sh",
    "platforms": ["8xH100", "8xH200", "8xB200"],
    "skip_for_cpu_jobs": true,
    "contexts": ["prolog", "hc_program"],
    "node_states": ["any"],
    "on_fail": "drain",
    "on_ok": "none",
    "reason_base": "[node_problem] $name",
    "reason_append_details": true,
    "run_in_jail": true,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  },
  {
    "name": "hc_xid",
    "command": "./hc_xid.sh",
    "platforms": ["8xH100", "8xH200", "8xB200", "1xH100", "1xH200", "1xB200"],
    "skip_for_cpu_jobs": true,
    "contexts": ["any"],
    "node_states": ["any"],
    "on_fail": "drain",
    "on_ok": "none",
    "reason_base": "[node_problem] $name",
    "reason_append_details": true,
    "run_in_jail": true,
    "log": "slurm_scripts/$worker.$name.$context.out",
    "need_env": []
  }
]
